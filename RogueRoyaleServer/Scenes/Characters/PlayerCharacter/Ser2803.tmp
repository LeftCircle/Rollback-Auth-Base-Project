[gd_scene load_steps=26 format=3 uid="uid://uwtnr33oalnv"]

[ext_resource type="Script" path="res://Scenes/Characters/PlayerCharacter/ServerPlayerCharacter.gd" id="1"]
[ext_resource type="Texture2D" uid="uid://dsv4x64k0f6a0" path="res://icon.png" id="2"]
[ext_resource type="PackedScene" path="res://Scenes/Characters/ModularSystems/Move/Move.tscn" id="4"]
[ext_resource type="Script" path="res://Scenes/Characters/ModularSystems/ComponentMap/S_ComponentMap.gd" id="4_epgoj"]
[ext_resource type="PackedScene" uid="uid://dwyxdallyf3xb" path="res://Scenes/Weapons/MeleeWeapons/Primary/Dagger/S_DaggerSimple.tscn" id="5"]
[ext_resource type="PackedScene" uid="uid://c44dbq11vp40e" path="res://Scenes/Weapons/RangeWeapons/StarterPistol/S_StarterPistol.tscn" id="6"]
[ext_resource type="PackedScene" path="res://Scenes/Weapons/MeleeWeapons/Secondary/Shields/StarterShield/S_StarterShieldAnimationTree.tscn" id="7"]
[ext_resource type="PackedScene" path="res://Scenes/Characters/ModularSystems/Dash/DashModular.tscn" id="8"]
[ext_resource type="Script" path="res://Scenes/Characters/PlayerCharacter/Scenes/PlayerHurtbox.gd" id="10"]
[ext_resource type="PackedScene" uid="uid://vaxxipqqryje" path="res://Scenes/Characters/ModularSystems/Ammo/AmmoBase.tscn" id="11"]
[ext_resource type="PackedScene" uid="uid://bbbaw8cgqbhbe" path="res://Scenes/Characters/ModularSystems/Stamina/S_Stamina.tscn" id="12"]
[ext_resource type="PackedScene" path="res://Scenes/Characters/ModularSystems/Health/BaseHealth.tscn" id="13"]
[ext_resource type="PackedScene" path="res://Scenes/Characters/ModularSystems/Health/Healing.tscn" id="14"]
[ext_resource type="Script" path="res://Scenes/Characters/PlayerCharacter/Scenes/PlayerAnimations.gd" id="23"]
[ext_resource type="Script" path="res://Scenes/Characters/ModularSystems/Dodge/S_Dodge.gd" id="24"]
[ext_resource type="Script" path="res://Scenes/Components/FX_Manager/ServerFXManager.gd" id="26"]
[ext_resource type="Script" path="res://Scenes/Characters/ModularSystems/InputQueue/S_InputQueue.gd" id="27"]
[ext_resource type="PackedScene" uid="uid://byumq3vijs58l" path="res://Scenes/Characters/ModularSystems/StateSystem/StateSystem.tscn" id="29"]

[sub_resource type="RectangleShape2D" id="1"]
resource_local_to_scene = true
size = Vector2(45, 20)

[sub_resource type="Animation" id="3"]
resource_name = "Idle"

[sub_resource type="Animation" id="6"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("PlayerHurtbox/CollisionShape2D:disabled")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [false]
}

[sub_resource type="Animation" id="5"]
resource_name = "Roll"
length = 0.9
step = 0.0166667
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("PlayerHurtbox/CollisionShape2D:disabled")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.183334, 0.6),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 1,
"values": [false, true, false]
}

[sub_resource type="Animation" id="4"]
resource_name = "Run"

[sub_resource type="AnimationLibrary" id="AnimationLibrary_7s25u"]
_data = {
"Idle": SubResource("3"),
"RESET": SubResource("6"),
"Roll": SubResource("5"),
"Run": SubResource("4")
}

[sub_resource type="CircleShape2D" id="CircleShape2D_r04gl"]
radius = 30.5

[node name="ServerPlayerCharacter" type="CharacterBody2D"]
collision_layer = 512
collision_mask = 513
script = ExtResource("1")

[node name="WorldCollisions" type="CollisionShape2D" parent="."]
position = Vector2(0, 12)
shape = SubResource("1")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
callback_mode_process = 2
callback_mode_method = 1
libraries = {
"": SubResource("AnimationLibrary_7s25u")
}
script = ExtResource("23")

[node name="PlayerHurtbox" type="Area2D" parent="."]
collision_layer = 4
collision_mask = 10
script = ExtResource("10")

[node name="CollisionShape2D" type="CollisionShape2D" parent="PlayerHurtbox"]
shape = SubResource("CircleShape2D_r04gl")

[node name="Components" type="Node2D" parent="." node_paths=PackedStringArray("entity")]
script = ExtResource("4_epgoj")
entity = NodePath("..")

[node name="Dash" parent="Components" instance=ExtResource("8")]
animation_player_path = NodePath("../../AnimationPlayer")
stamina_path = NodePath("../BaseStamina")
dash_seconds = 0.15

[node name="AmmoBase" parent="Components" instance=ExtResource("11")]
ammo_to_refill_on_hit = 3

[node name="BaseStamina" parent="Components" instance=ExtResource("12")]

[node name="BaseHealth" parent="Components" instance=ExtResource("13")]
health_segments = 3
shield_segments = 4

[node name="Healing" parent="Components" instance=ExtResource("14")]
health_component_path = NodePath("../BaseHealth")

[node name="Pistol" parent="Components" instance=ExtResource("6")]
ammo = 6

[node name="S_Dodge" type="Node" parent="Components"]
script = ExtResource("24")
animation_path = NodePath("../../AnimationPlayer")
stamina_path = NodePath("../BaseStamina")
stamina_cost = 1

[node name="InputQueue" type="Node" parent="Components"]
script = ExtResource("27")

[node name="StarterShield" parent="Components" instance=ExtResource("7")]

[node name="Dagger" parent="Components" instance=ExtResource("5")]

[node name="StateSystem" parent="Components" instance=ExtResource("29")]

[node name="Move" parent="Components" instance=ExtResource("4")]

[node name="DebugSprite" type="Sprite2D" parent="."]
visible = false
scale = Vector2(0.25, 0.25)
texture = ExtResource("2")

[node name="FXManager" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("26")
